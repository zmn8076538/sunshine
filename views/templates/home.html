<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- <link rel="shotcut icon" href="bitbug_favicon.ico"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_1047560_xq50ar43aqd.css">
    <link rel="stylesheet" href="https://unpkg.com/vue-easytable/umd/css/index.css">
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        #list{
            /* width: 100%;
            height: 100%; */
            /* background: red; */
            position: absolute;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            /* transform: translate(-50%,-50%);
            border: 1px solid black; */
            /* background: red; */
        }
        #list-head{
            width: 100%;
            height: 20%;
            /* 100px */
            /* position: absolute; */
            /* background: yellow; */
            /* border-bottom: 1px solid rgb(5, 5, 29); */
        }
        #list-head .list-head-left{
            width: 20%;
            height: 100%;
            float: left;
            background: rgb(49, 59, 117);
        }
        #list-head .list-head-right{
            width: 80%;
            height: 100%;
            background: rgb(211, 214, 212);
            float: right;
        }
        #list-head .list-head-left h2{
            line-height: 8rem;
            text-align: center;
            /* font-size: 4rem; */
            color: white;
        }
        #list-head .list-head-right h2{
            line-height: 8rem;
            margin-left: 1rem;
            /* margin-top: 35px; */
            
            color: rgb(92, 87, 87);
        }
        #list-head .list-head-right h6{
            line-height: 8rem; 
            margin-left: 1rem;
            /* margin-top: 30px; */
            color: rgb(92, 87, 87);
        }
        #list-body{
            width: 20%;
            height: 80%;
            background: rgb(78, 95, 105);
            /* border-top: 1px solid black; */
        }
        #list-body .list-body-left li{
            list-style: none;
            height: 4.5rem;
            color: aliceblue;
            /* margin-left: 20px; */
            line-height: 4rem;
            text-align: center;
            cursor: pointer;
        }
        #list-body .list-body-left li.changeli{
            background:rgb(43, 53, 59);
        }
        #list-body .dow{
            position: absolute;
            right: 0px;
            top:10.5rem;
            background: rgb(231, 230, 230);
            height:80%;
            width: 80%;
            display: none;
            /* border-top: 1px solid black; */
        }
        #list-body .show{
            display: block;
        }
        /* .table-xj td{
            margin-left: 20px;
        } */
        .hover{
            border: 2px solid red;
        }
    </style>
</head>
<body>
    <div id="list">
        <div id="list-head">
            <div class="list-head-left">
                <h2>客户数据管理系统</h2>
            </div>
            <div class="list-head-right">
                <h2>多打电话多出单，没事别老玩手机</h2>
                <!-- <h6>当前用户：小UU</h6> -->
            </div>
        </div>
        <div id="list-body">
            <ul id="ul1" class="list-body-left">
                <li class="changeli" ><i class="iconfont icon-renyuan"></i>新建客户</li>
                <li id="getCustomersNotContact" ><i class="iconfont icon-shangpin"></i>未联系客户</li>
                <li><i class="iconfont icon-shangpin"></i>已联系客户</li>
                <li><i class="iconfont icon-geren"></i>已预约客户</li>
                <li><i class="iconfont icon-dizhi"></i>有印象客户</li>
                <li><i class="iconfont icon-mendian"></i>待确定预约时间客户</li>
                <li><i class="iconfont icon-mendian"></i>预约上门客户</li>
                <li><i class="iconfont icon-mendian"></i>已出单客户</li>
            </ul>
            <div id="content">
                <div class="dow">
                    <form id="addCustomer" class="form-inline text-center" style="margin:15px;">
                        <table class="table-xj">
                            <tr>
                                <td>
                                    <label for="name">客户姓名</label>
                                    <input name="name" type="text" class="form-control"  id="name" placeholder="请输客户姓名">
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="gender" >性别</label>
                                    <select name="gender" id="gender">
                                        <option value="man">男</option>
                                        <option value="woman">女</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="phone">手机号</label>
                                    <input name="phone" type="text" class="form-control" id="phone" placeholder="请输入手机号">
                                </td>
                            </tr>

                            <tr>
                                <td><button id="add" type="button" class="btn btn-default" >添加</button></td>
                            </tr>
                        </table>
                    </form>
                </div>
                <div class="dow"> <!--未联系客户-->
                    <table class="table table-bordered text-center">
                        <thead>
                            <td>客户姓名</td>
                            <td>性别</td>
                            <td>手机号</td>
                        </thead>
                        <tbody>
                            <tr v-for='item in showlist'>
                                <td>customers[0][0]</td>
                                <td>xxxxx</td>
                                <td>xxxxx</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="dow"> 未接电话、不来的客户</div>
                <div class="dow"> 已约好哪天来</div>
                <div class="dow"> 当时来了没出，后续可追</div>
                <div class="dow"> 待确定预约时间客户</div>
                <div class="dow"> 预约上门客户</div>
                <div class="dow"> 已出单客户</div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        var lis = document.getElementById("ul1").getElementsByTagName("li");
        var divs = document.getElementById("content").getElementsByTagName("div");
        for(var i=0; i<lis.length; i++){
            lis[i].index = i;
            lis[i].onclick = function(){
                for(var j=0; j<lis.length; j++){
                    lis[j].className = "";
                }
                this.className ="hover";
                for(var i=0; i<divs.length; i++){
                    divs[i].style.display="none";
                }
                divs[this.index].style.display = "block";
            }
        }


        var pre = document.cookie.split("userId=")[1];
        var arr = pre;
        if(pre.indexOf(";") != -1){
            arr = pre.split(";")[0];
        }
        //添加客户ajax请求
        $("#add").click(function() {
            $.ajax({
                url: "/addCustomer",//要请求的服务器url
                //这是一个对象，表示请求的参数，两个参数：method=ajax&val=xxx，服务器可以通过request.getParameter()来获取
                //data:{method:"ajaxTest",val:value},
                data: {
                    userId: arr,
                    name: $("#name").val(),
                    gender: $("#gender").val(),
                    phone: $("#phone").val()
                },
                async: true,   //是否为异步请求
                cache: false,  //是否缓存结果
                type: "POST", //请求方式为POST
                dataType: "json",   //服务器返回的数据是什么类型
                success: function(result){  //这个方法会在服务器执行成功是被调用 ，参数result就是服务器返回的值(现在是json类型)
                     alert(result.message);
                     $("#name").val("");
                     $("#gender").val("");
                     $("#phone").val("");
                }
            });
        });

        //获取未联系客户
        $("#getCustomersNotContact").click(function() {
            $.ajax({
                url: "/getCustomers_contact",//要请求的服务器url
                //这是一个对象，表示请求的参数，两个参数：method=ajax&val=xxx，服务器可以通过request.getParameter()来获取
                //data:{method:"ajaxTest",val:value},
                data: {
                    userId: arr,
                    //name: $("#name").val(),
                    //gender: $("#gender").val(),
                    //phone: $("#phone").val()
                },
                async: true,   //是否为异步请求
                cache: false,  //是否缓存结果
                type: "POST", //请求方式为POST
                dataType: "json",   //服务器返回的数据是什么类型
                success: function(customers){  //这个方法会在服务器执行成功是被调用 ，参数result就是服务器返回的值(现在是json类型)

                }
            });
        });
    </script>
</body>
</html>